!function(){"use strict";class e extends Snowboard.Singleton{listens(){return{ready:"ready",ajaxFetchOptions:"ajaxFetchOptions",ajaxUpdateComplete:"ajaxUpdateComplete"}}ready(){window.jQuery&&window.jQuery(document).trigger("render")}addPrefilter(){window.jQuery&&window.jQuery.ajaxPrefilter((e=>{this.hasToken()&&(e.headers||(e.headers={}),e.headers["X-CSRF-TOKEN"]=this.getToken())}))}ajaxFetchOptions(e){this.hasToken()&&(e.headers["X-CSRF-TOKEN"]=this.getToken())}ajaxUpdateComplete(){window.jQuery&&window.jQuery(document).trigger("render")}hasToken(){const e=document.querySelector('meta[name="csrf-token"]');return!!e&&!!e.hasAttribute("content")}getToken(){return document.querySelector('meta[name="csrf-token"]').getAttribute("content")}}class t extends Snowboard.Singleton{construct(){this.registeredWidgets=[]}listens(){return{ready:"onReady",ajaxUpdate:"onAjaxUpdate"}}register(e,t,a){this.registeredWidgets.push({control:e,widget:t,callback:a})}unregister(e){this.registeredWidgets=this.registeredWidgets.filter((t=>t.control!==e))}onReady(){this.initialiseWidgets(document.body)}onAjaxUpdate(e){this.initialiseWidgets(e)}initialiseWidgets(e){this.registeredWidgets.forEach((t=>{const a=e.querySelectorAll(`[data-control="${t.control}"]`);a.length&&a.forEach((e=>{if(e.dataset.widgetInitialised)return;const a=this.snowboard[t.widget](e);e.dataset.widget=a,e.dataset.widgetInitialised=!0,this.snowboard.globalEvent("backend.widget.initialised",e,a),e.getWidget=function(){return this.dataset.widget},"function"==typeof t.callback&&t.callback(a,e)}))}))}}if(void 0===window.Snowboard)throw new Error("Snowboard must be loaded in order to use the Backend UI.");(a=>{a.addPlugin("backend.ajax.handler",e),a.addPlugin("backend.ui.widgetHandler",t),a["backend.ajax.handler"]().addPrefilter(),window.AssetManager={load:(e,t)=>{a.assetLoader().load(e).then((()=>{t&&"function"==typeof t&&t()}))}},window.assetManager=window.AssetManager})(window.Snowboard)}();