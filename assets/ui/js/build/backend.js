!function(){"use strict";class e extends Snowboard.Singleton{listens(){return{ready:"ready",ajaxFetchOptions:"ajaxFetchOptions",ajaxUpdateComplete:"ajaxUpdateComplete"}}ready(){window.jQuery&&(!function(e,t){void 0===t&&(t=["event"]);var n=e.startsWith("$")?function(){return window.$(document).trigger(e.slice(1),[].slice.call(arguments)[0].detail)}:function(){var n=arguments,i=t.reduce((function(e,t,i){return e[t]=[].slice.call(n)[i],e}),{});i.event.target.dispatchEvent(new CustomEvent("$"+e,{detail:i,bubbles:!0,cancelable:!0}))};e.startsWith("$")?document.addEventListener(e,n):window.$(document).on(e,n)}("render"),window.jQuery(document).trigger("render"),document.addEventListener("$render",(()=>{this.snowboard.globalEvent("render")})))}addPrefilter(){window.jQuery&&window.jQuery.ajaxPrefilter((e=>{this.hasToken()&&(e.headers||(e.headers={}),e.headers["X-CSRF-TOKEN"]=this.getToken())}))}ajaxFetchOptions(e){this.hasToken()&&(e.headers["X-CSRF-TOKEN"]=this.getToken())}ajaxUpdateComplete(){window.jQuery&&window.jQuery(document).trigger("render")}hasToken(){const e=document.querySelector('meta[name="csrf-token"]');return!!e&&!!e.hasAttribute("content")}getToken(){return document.querySelector('meta[name="csrf-token"]').getAttribute("content")}}class t extends Snowboard.PluginBase{construct(e,t){if(e instanceof Snowboard.PluginBase==!1)throw new Error("Event handling can only be applied to Snowboard classes.");if(!t)throw new Error("Event prefix is required.");this.instance=e,this.eventPrefix=t,this.events=[]}on(e,t){this.events.push({event:e,callback:t})}off(e,t){this.events=this.events.filter((n=>n.event!==e||n.callback!==t))}once(e,t){var n=this;const i=this.events.push({event:e,callback:function(){t(...arguments),n.events.splice(i-1,1)}})}fire(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];const a=this.events.filter((t=>t.event===e));let r=!1;a.forEach((e=>{r||!1===e.callback(...n)&&(r=!0)})),r||this.snowboard.globalEvent(`${this.eventPrefix}.${e}`,...n)}firePromise(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];const a=this.events.filter((t=>t.event===e)),r=a.filter((e=>null!==e),a.map((e=>e.callback(...n))));Promise.all(r).then((()=>{this.snowboard.globalPromiseEvent(`${this.eventPrefix}.${e}`,...n)}))}}class n extends Snowboard.Singleton{construct(){this.registeredWidgets=[],this.elements=[]}listens(){return{ready:"onReady",render:"onReady",ajaxUpdate:"onAjaxUpdate"}}register(e,t,n){this.registeredWidgets.push({control:e,widget:t,callback:n})}unregister(e){this.registeredWidgets=this.registeredWidgets.filter((t=>t.control!==e))}onReady(){this.initializeWidgets(document.body)}onAjaxUpdate(e){this.initializeWidgets(e)}initializeWidgets(e){this.registeredWidgets.forEach((t=>{const n=e.querySelectorAll(`[data-control="${t.control}"]:not([data-widget-initialized])`);n.length&&n.forEach((e=>{if(e.dataset.widgetInitialized)return;const n=this.snowboard[t.widget](e);this.elements.push({element:e,instance:n}),e.dataset.widgetInitialized=!0,this.snowboard.globalEvent("backend.widget.initialized",e,n),"function"==typeof t.callback&&t.callback(n,e)}))}))}getWidget(e){const t=this.elements.find((t=>t.element===e));return t?t.instance:null}}if(void 0===window.Snowboard)throw new Error("Snowboard must be loaded in order to use the Backend UI.");(i=>{i.addPlugin("backend.ajax.handler",e),i.addPlugin("backend.ui.eventHandler",t),i.addPlugin("backend.ui.widgetHandler",n),i["backend.ajax.handler"]().addPrefilter(),window.AssetManager={load:(e,t)=>{i.assetLoader().load(e).then((()=>{t&&"function"==typeof t&&t()}))}},window.assetManager=window.AssetManager})(window.Snowboard)}();