"use strict";(self.webpackChunk_wintercms_wn_backend_module=self.webpackChunk_wintercms_wn_backend_module||[]).push([[989],{617:function(){class t{constructor(t,e){this.editor=t,this.monaco=e,this.button=null}bindButton(t){this.button=t}icon(){return"location-crosshairs"}tooltip(){return null}shortcutKey(){return null}status(){return null}isDropdown(){return!1}dropdownItems(){return[]}isActive(){return!1}isEnabled(){return!1}action(){}}class e extends t{icon(){return"bold"}tooltip(){return"Bold"}shortcutKey(){return"B"}isActive(){return!1}isEnabled(){return!0}action(){this.monaco.wrap("**","**")}}(t=>{class o extends t.PluginBase{construct(t){this.element=t,this.toolbar=t.querySelector(".markdowneditor-toolbar"),this.editorElement=t.querySelector(".markdowneditor-editor"),this.editor=null,this.actions=[],this.createEditor(),this.registerActions(),this.createToolbar()}dependencies(){return["backend.formwidgets.codeeditor"]}createEditor(){this.editor=this.snowboard["backend.formwidgets.codeeditor"](this.editorElement),this.editor.loadTheme("chrome"),this.editor.setConfig("showGutter",!1),this.editor.setConfig("showMinimap",!1),this.editor.setConfig("showColors",!1),this.editor.setConfig("displayIndentGuides",!1),this.editor.setConfig("codeFolding",!1),this.editor.events.once("create",(()=>{this.editor.setLanguage("markdown")}))}registerActions(){this.actions.push({name:"bold",action:new e(this,this.editor)})}findAction(t){const e=this.actions.find((e=>e.name===t));return e?e.action:null}createToolbar(){this.toolbar.children.length&&this.toolbar.children.forEach((t=>{t.remove()})),this.actions.forEach((t=>{this.toolbar.appendChild(this.createToolbarButton(t))}))}createToolbarButton(t){let{name:e,action:o}=t;const i=document.createElement("button");i.dataset.action=e,o.isActive()&&i.classList.add("active"),o.isDropdown()&&i.classList.add("dropdown"),i.disabled=!o.isEnabled();const s=document.createElement("i");if(s.classList.add(`icon-${o.icon()}`),i.appendChild(s),o.status()){const t=document.createElement("span");t.classList.add("status"),t.innerText=o.status(),i.appendChild(t)}if(o.bindButton(i),o.dropdownItems().length){const t=document.createElement("div");t.classList.add("dropdown");const e=document.createElement("ul");return e.classList.add("dropdown-menu"),e.setAttribute("role","menu"),this.generateDropdownItems(o,e),t.appendChild(i),t.appendChild(e),o.tooltip()&&(t.classList.add("has-tooltip"),t.setAttribute("data-toggle","tooltip"),t.setAttribute("title",o.tooltip()),o.shortcutKey()&&t.setAttribute("title",`${t.getAttribute("title")} (${this.getModifierKey()}${o.shortcutKey()})`)),i.setAttribute("data-toggle","dropdown"),t}return o.tooltip()&&(i.classList.add("has-tooltip"),i.setAttribute("data-toggle","tooltip"),i.setAttribute("title",o.tooltip()),o.shortcutKey()&&i.setAttribute("title",`${i.getAttribute("title")} (${this.getModifierKey()}${o.shortcutKey()})`)),i.addEventListener("click",(t=>{t.preventDefault(),t.stopImmediatePropagation(),o.action(),this.updateToolbarButtonStates()})),i}generateDropdownItems(t,e){t.dropdownItems().length&&t.dropdownItems().forEach((t=>{const o=document.createElement("li");o.setAttribute("role","presentation"),t.active&&o.classList.add("active"),t.enabled||o.classList.add("disabled");const i=document.createElement("a");i.setAttribute("role","menuitem"),i.setAttribute("href","#"),t.icon&&i.classList.add(`wn-icon-${t.icon}`),t.label&&(i.innerText=t.label),t.enabled&&i.addEventListener("click",(e=>{e.preventDefault(),t.action(),this.updateToolbarButtonStates()})),o.appendChild(i),e.appendChild(o)}))}updateToolbarButtonStates(){this.toolbar.querySelectorAll("button[data-action]").forEach((t=>{const e=this.findAction(t.dataset.action);if(e){if(t.querySelector("i").className=`icon-${e.icon()}`,e.status()){let o=t.querySelector(".status");o||(o=document.createElement("span"),o.classList.add("status"),t.appendChild(o)),o.innerText=e.status()}else t.querySelector(".status")&&t.querySelector(".status").remove();if(e.dropdownItems().length){let o=t.parentElement;o.classList.contains("dropdown")||(o=document.createElement("div"),o.classList.add("dropdown")),o.querySelector("ul")&&o.querySelector("ul").remove();const i=document.createElement("ul");i.classList.add("dropdown-menu"),i.setAttribute("role","menu"),this.generateDropdownItems(e,i),o.appendChild(t),o.appendChild(i),e.tooltip()&&o.classList.contains("has-tooltip")&&(o.setAttribute("title",e.tooltip()),e.shortcutKey()&&o.setAttribute("title",`${o.getAttribute("title")} (${this.getModifierKey()}${e.shortcutKey()})`)),t.setAttribute("data-toggle","dropdown")}else e.tooltip()&&t.classList.contains("has-tooltip")&&(t.setAttribute("title",e.tooltip()),e.shortcutKey()&&t.setAttribute("title",`${t.getAttribute("title")} (${this.getModifierKey()}${e.shortcutKey()})`));t.disabled=!e.isEnabled(),e.isActive()?t.classList.add("active"):t.classList.remove("active")}}))}getModifierKey(){let t="^";return 0!==navigator.platform.indexOf("Mac")&&"iPhone"!==navigator.platform||(t="âŒ˜"),t}}t.addPlugin("backend.formwidgets.markdowneditor",o),t["backend.ui.widgetHandler"]().register("markdowneditor","backend.formwidgets.markdowneditor")})(window.Snowboard)}},function(t){var e;e=617,t(t.s=e)}]);